{"version": 3,"file": "",
"sourceroot": "",
"sources": ["pages/im/room/index.js","app.js","components/chatroom/chatroom.js","pages/sy/sy.js","pages/index/index.js","pages/xinqing/xinqing.js","pages/userConsole/userConsole.js","pages/storageConsole/storageConsole.js","pages/databaseGuide/databaseGuide.js","pages/addFunction/addFunction.js","pages/deployFunctions/deployFunctions.js","pages/chooseLib/chooseLib.js","pages/openapi/openapi.js","pages/openapi/serverapi/serverapi.js","pages/openapi/callback/callback.js","pages/openapi/cloudid/cloudid.js","pages/im/im.js","pages/im/room/room.js","pages/next/next.js","pages/meishi/meishi.js","pages/shudong/shudong.js","pages/contact/contact.js","pages/denglu/denglu.js"],
"names": ["_getOpenID","getApp","Page","data","avatarUrl","userInfo","logged","takeSession","requestResult","chatRoomEnvId","chatRoomCollection","chatRoomGroupId","chatRoomGroupName","onGetUserInfo","getOpenID","onLoad","_this","this","wx","getSetting","success","res","authSetting","getUserInfo","setData","getSystemInfo","console","log","safeArea","_res$safeArea","top","bottom","containerStyle","concat","test","system","windowHeight","_asyncToGenerator2","default","_regenerator","mark","_callee","_yield$wx$cloud$callF","result","wrap","_context","prev","next","openid","abrupt","cloud","callFunction","name","config","env","sent","stop","apply","arguments","e","detail","onShareAppMessage","title","path","App","onLaunch","init","traceUser","error","globalData","_try2","_onScrollToUpper","_onChooseImage","_onConfirmSendText","_initWatch","_initOpenID","_initRoom","SETDATA_SCROLL_TO_BOTTOM","scrollTop","scrollWithAnimation","Component","properties","envId","String","collection","groupId","groupName","Object","type","Function","chats","textInputValue","openId","scrollToMessage","hasKeyboard","methods","mergeCommonCriteria","criteria","_objectSpread","initRoom","_callee2","_context2","try","_this$properties","db","_","_yield$db$collection$","initList","initOpenID","database","command","where","orderBy","get","reverse","initWatch","length","sendTimeTS","gt","_callee4","_this2","_context4","_callee3","_context3","_callee5","_this3","_context5","warn","messageListener","watch","onChange","onRealtimeMessageSnapshot","bind","onError","inited","fatalRebuildCount","showError","_x","snapshot","_this4","_toConsumableArray2","docs","sort","x","y","scrollToBottom","_step","hasNewMessage","hasOthersMessage","_iterator","_createForOfIteratorHelper","docChanges","_loop","docChange","value","queueType","doc","_openid","ind","findIndex","chat","_id","msgType","tempFilePath","splice","push","s","n","done","err","f","onConfirmSendText","_callee7","_this5","_context7","_callee6","_context6","Math","random","Date","now","avatar","nickName","textContent","sendTime","writeStatus","add","map","_x2","onChooseImage","_callee10","_this6","_context10","chooseImage","count","sourceType","_success","_callee9","_this6$properties","_context9","tempFilePaths","uploadFile","cloudPath","match","filePath","_callee8","_context8","imgFileID","fileID","fail","onProgressUpdate","_ref5","progress","_x4","_x3","onMessageImageTap","previewImage","urls","target","dataset","fileid","force","_this7","createSelectorQuery","select","boundingClientRect","bodyRect","scrollOffset","scroll","height","scrollHeight","exec","onScrollToUpper","_callee11","_this$data$chats","_yield$this$db$collec","_context11","lt","unshift","_callee12","fn","_context12","t0","_x5","_x6","content","confirmText","confirmCallback","showModal","toString","showCancel","confirm","ready","global","chatroom","id","access_token","errcode","input1","setStorage","key","that","request","url","method","navigateTo","complete","app","denglu","sign","date1","health","feeling","growth","pict","one","setTimeout","two","three","four","five","into","intomodal","changeYL","hideModal","onGetOpenid","doUpload","sizeType","showLoading","imagePath","showToast","icon","hideLoading","company","parseInt","cur_time","getDate","add_item_by_database","date","getStorageSync","slice","len","t","then","myDate","getFullYear","getMonth","getDay","save","db_name","obj","del_id","remove","visiable","score","dict","visiable2","tap1","text","search1","_step2","arr","sum","_iterator2","new_score","options","_app$globalData","group","groupEnd","step","counterId","queryResult","onAdd","onQuery","onCounterInc","onCounterDec","onRemove","nextStep","callback","prevStep","goHome","pages","getCurrentPages","navigateBack","redirectTo","reLaunch","canIUseClipboard","canIUse","copyCode","setClipboardData","testFunction","a","b","JSON","stringify","onReady","onShow","onHide","onUnload","onPullDownRefresh","onReachBottom","templateMessageResult","wxacodeSrc","wxacodeResult","showClearWXACodeCache","submitTemplateMessageForm","action","formId","onGetWXACode","setStorageSync","clearWXACodeCache","removeStorageSync","_requestSubscribeMessage","_getSubscribeMessageTemplate","templateId","subscribeMessageResult","requestSubscribeMessageResult","getSubscribeMessageTemplate","requestSubscribeMessage","tmplIds","sendSubscribeMessage","submitSubscribeMessageForm","onCustomerServiceButtonClick","weRunResult","userInfoResult","onGetWeRunData","getWeRunData","info","CloudID","cloudID","catch","openData","list","know","icw","region","keyword","address","category","locationlat","locationlng","i","input2","tap","location","lat","lng","lan","toView","chat_list","getStorage","item","label","txt","token","old_arr","raw","rawData","perception","inputText","apiKey","userId","_ref","re","results","values","bindGetUserInfo"],
"mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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",
"sourcesContent": ["//index.js\nconst app = getApp()\n\nPage({\n  data: {\n    avatarUrl: './user-unlogin.png',\n    userInfo: null,\n    logged: false,\n    takeSession: false,\n    requestResult: '',\n    chatRoomEnvId: 'release-f8415a',\n    chatRoomCollection: 'kecun',\n    chatRoomGroupId: 'tit-bricker',\n    chatRoomGroupName: '深夜话题',\n\n    // functions for used in chatroom components\n    onGetUserInfo: null,\n    getOpenID: null,\n  },\n\n  onLoad: function() {\n    // 获取用户信息\n    wx.getSetting({\n      success: res => {\n        if (res.authSetting['scope.userInfo']) {\n          // 已经授权，可以直接调用 getUserInfo 获取头像昵称，不会弹框\n          wx.getUserInfo({\n            success: res => {\n              this.setData({\n                avatarUrl: res.userInfo.avatarUrl,\n                userInfo: res.userInfo\n              })\n            }\n          })\n        }\n      }\n    })\n\n    this.setData({\n      onGetUserInfo: this.onGetUserInfo,\n      getOpenID: this.getOpenID,\n    })\n\n    wx.getSystemInfo({\n      success: res => {\n        console.log('system info', res)\n        if (res.safeArea) {\n          const { top, bottom } = res.safeArea\n          this.setData({\n            containerStyle: `padding-top: ${(/ios/i.test(res.system) ? 10 : 20) + top}px; padding-bottom: ${20 + res.windowHeight - bottom}px`,\n          })\n        }\n      },\n    })\n  },\n\n  getOpenID: async function() {\n    if (this.openid) {\n      return this.openid\n    }\n\n    const { result } = await wx.cloud.callFunction({\n      name: 'login',\n      config: {\n        env: 'release-f8415a',\n      },\n    })\n\n    return result.openid\n  },\n\n  onGetUserInfo: function(e) {\n    if (!this.logged && e.detail.userInfo) {\n      this.setData({\n        logged: true,\n        avatarUrl: e.detail.userInfo.avatarUrl,\n        userInfo: e.detail.userInfo\n      })\n    }\n  },\n\n  onShareAppMessage() {\n    return {\n      title: '深夜话题',\n      path: '/pages/index/index',\n    }\n  },\n})\n","//app.js\nApp({\n  onLaunch: function () {\n    \n    if (!wx.cloud) {\n      console.error('请使用 2.2.3 或以上的基础库以使用云能力')\n    } else {\n      wx.cloud.init({\n        // env 参数说明：\n        //   env 参数决定接下来小程序发起的云开发调用（wx.cloud.xxx）会默认请求到哪个云环境的资源\n        //   此处请填入环境 ID, 环境 ID 可打开云控制台查看\n        //   如不填则使用默认环境（第一个创建的环境）\n        // env: 'my-env-id',\n        traceUser: true,\n      })\n    }\n\n    this.globalData = {}\n  }\n})\n","const FATAL_REBUILD_TOLERANCE = 10\nconst SETDATA_SCROLL_TO_BOTTOM = {\n  scrollTop: 100000,\n  scrollWithAnimation: true,\n}\n\nComponent({\n  properties: {\n    envId: String,\n    collection: String,\n    groupId: String,\n    groupName: String,\n    userInfo: Object,\n    onGetUserInfo: {\n      type: Function,\n    },\n    getOpenID: {\n      type: Function,\n    },\n  },\n\n  data: {\n    chats: [],\n    textInputValue: '',\n    openId: '',\n    scrollTop: 0,\n    scrollToMessage: '',\n    hasKeyboard: false,\n  },\n\n  methods: {\n    onGetUserInfo(e) {\n      this.properties.onGetUserInfo(e)\n    },\n\n    getOpenID() { \n      return this.properties.getOpenID() \n    },\n\n    mergeCommonCriteria(criteria) {\n      return {\n        groupId: this.data.groupId,\n        ...criteria,\n      }\n    },\n\n    async initRoom() {\n      this.try(async () => {\n        await this.initOpenID()\n\n        const { envId, collection } = this.properties\n        const db = this.db = wx.cloud.database({\n          env: envId,\n        })\n        const _ = db.command\n\n        const { data: initList } = await db.collection(collection).where(this.mergeCommonCriteria()).orderBy('sendTimeTS', 'desc').get()\n\n        console.log('init query chats', initList)\n\n        this.setData({\n          chats: initList.reverse(),\n          scrollTop: 10000,\n        })\n\n        this.initWatch(initList.length ? {\n          sendTimeTS: _.gt(initList[initList.length - 1].sendTimeTS),\n        } : {})\n      }, '初始化失败')\n    },\n\n    async initOpenID() {\n      return this.try(async () => {\n        const openId = await this.getOpenID()\n\n        this.setData({\n          openId,\n        })\n      }, '初始化 openId 失败')\n    },\n\n    async initWatch(criteria) {\n      this.try(() => {\n        const { collection } = this.properties\n        const db = this.db\n        const _ = db.command\n\n        console.warn(`开始监听`, criteria)\n        this.messageListener = db.collection(collection).where(this.mergeCommonCriteria(criteria)).watch({\n          onChange: this.onRealtimeMessageSnapshot.bind(this),\n          onError: e => {\n            if (!this.inited || this.fatalRebuildCount >= FATAL_REBUILD_TOLERANCE) {\n              this.showError(this.inited ? '监听错误，已断开' : '初始化监听失败', e, '重连', () => {\n                this.initWatch(this.data.chats.length ? {\n                  sendTimeTS: _.gt(this.data.chats[this.data.chats.length - 1].sendTimeTS),\n                } : {})\n              })\n            } else {\n              this.initWatch(this.data.chats.length ? {\n                sendTimeTS: _.gt(this.data.chats[this.data.chats.length - 1].sendTimeTS),\n              } : {})\n            }\n          },\n        })\n      }, '初始化监听失败')\n    },\n\n    onRealtimeMessageSnapshot(snapshot) {\n      console.warn(`收到消息`, snapshot)\n\n      if (snapshot.type === 'init') {\n        this.setData({\n          chats: [\n            ...this.data.chats,\n            ...[...snapshot.docs].sort((x, y) => x.sendTimeTS - y.sendTimeTS),\n          ],\n        })\n        this.scrollToBottom()\n        this.inited = true\n      } else {\n        let hasNewMessage = false\n        let hasOthersMessage = false\n        const chats = [...this.data.chats]\n        for (const docChange of snapshot.docChanges) {\n          switch (docChange.queueType) {\n            case 'enqueue': {\n              hasOthersMessage = docChange.doc._openid !== this.data.openId\n              const ind = chats.findIndex(chat => chat._id === docChange.doc._id)\n              if (ind > -1) {\n                if (chats[ind].msgType === 'image' && chats[ind].tempFilePath) {\n                  chats.splice(ind, 1, {\n                    ...docChange.doc,\n                    tempFilePath: chats[ind].tempFilePath,\n                  })\n                } else chats.splice(ind, 1, docChange.doc)\n              } else {\n                hasNewMessage = true\n                chats.push(docChange.doc)\n              }\n              break\n            }\n          }\n        }\n        this.setData({\n          chats: chats.sort((x, y) => x.sendTimeTS - y.sendTimeTS),\n        })\n        if (hasOthersMessage || hasNewMessage) {\n          this.scrollToBottom()\n        }\n      }\n    },\n\n    async onConfirmSendText(e) {\n      this.try(async () => {\n        if (!e.detail.value) {\n          return\n        }\n\n        const { collection } = this.properties\n        const db = this.db\n        const _ = db.command\n\n        const doc = {\n          _id: `${Math.random()}_${Date.now()}`,\n          groupId: this.data.groupId,\n          avatar: this.data.userInfo.avatarUrl,\n          nickName: this.data.userInfo.nickName,\n          msgType: 'text',\n          textContent: e.detail.value,\n          sendTime: new Date(),\n          sendTimeTS: Date.now(), // fallback\n        }\n\n        this.setData({\n          textInputValue: '',\n          chats: [\n            ...this.data.chats,\n            {\n              ...doc,\n              _openid: this.data.openId,\n              writeStatus: 'pending',\n            },\n          ],\n        })\n        this.scrollToBottom(true)\n\n        await db.collection(collection).add({\n          data: doc,\n        })\n\n        this.setData({\n          chats: this.data.chats.map(chat => {\n            if (chat._id === doc._id) {\n              return {\n                ...chat,\n                writeStatus: 'written',\n              }\n            } else return chat\n          }),\n        })\n      }, '发送文字失败')\n    },\n\n    async onChooseImage(e) {\n      wx.chooseImage({\n        count: 1,\n        sourceType: ['album', 'camera'],\n        success: async res => {\n          const { envId, collection } = this.properties\n          const doc = {\n            _id: `${Math.random()}_${Date.now()}`,\n            groupId: this.data.groupId,\n            avatar: this.data.userInfo.avatarUrl,\n            nickName: this.data.userInfo.nickName,\n            msgType: 'image',\n            sendTime: new Date(),\n            sendTimeTS: Date.now(), // fallback\n          }\n\n          this.setData({\n            chats: [\n              ...this.data.chats,\n              {\n                ...doc,\n                _openid: this.data.openId,\n                tempFilePath: res.tempFilePaths[0],\n                writeStatus: 0,\n              },\n            ]\n          })\n          this.scrollToBottom(true)\n\n          const uploadTask = wx.cloud.uploadFile({\n            cloudPath: `${this.data.openId}/${Math.random()}_${Date.now()}.${res.tempFilePaths[0].match(/\\.(\\w+)$/)[1]}`,\n            filePath: res.tempFilePaths[0],\n            config: {\n              env: envId,\n            },\n            success: res => {\n              this.try(async () => {\n                await this.db.collection(collection).add({\n                  data: {\n                    ...doc,\n                    imgFileID: res.fileID,\n                  },\n                })\n              }, '发送图片失败')\n            },\n            fail: e => {\n              this.showError('发送图片失败', e)\n            },\n          })\n\n          uploadTask.onProgressUpdate(({ progress }) => {\n            this.setData({\n              chats: this.data.chats.map(chat => {\n                if (chat._id === doc._id) {\n                  return {\n                    ...chat,\n                    writeStatus: progress,\n                  }\n                } else return chat\n              })\n            })\n          })\n        },\n      })\n    },\n\n    onMessageImageTap(e) {\n      wx.previewImage({\n        urls: [e.target.dataset.fileid],\n      })\n    },\n\n    scrollToBottom(force) {\n      if (force) {\n        console.log('force scroll to bottom')\n        this.setData(SETDATA_SCROLL_TO_BOTTOM)\n        return\n      }\n\n      this.createSelectorQuery().select('.body').boundingClientRect(bodyRect => {\n        this.createSelectorQuery().select(`.body`).scrollOffset(scroll => {\n          if (scroll.scrollTop + bodyRect.height * 3 > scroll.scrollHeight) {\n            console.log('should scroll to bottom')\n            this.setData(SETDATA_SCROLL_TO_BOTTOM)\n          }\n        }).exec()\n      }).exec()\n    },\n\n    async onScrollToUpper() {\n      if (this.db && this.data.chats.length) {\n        const { collection } = this.properties\n        const _ = this.db.command\n        const { data } = await this.db.collection(collection).where(this.mergeCommonCriteria({\n          sendTimeTS: _.lt(this.data.chats[0].sendTimeTS),\n        })).orderBy('sendTimeTS', 'desc').get()\n        this.data.chats.unshift(...data.reverse())\n        this.setData({\n          chats: this.data.chats,\n          scrollToMessage: `item-${data.length}`,\n          scrollWithAnimation: false,\n        })\n      }\n    },\n\n    async try(fn, title) {\n      try {\n        await fn()\n      } catch (e) {\n        this.showError(title, e)\n      }\n    },\n\n    showError(title, content, confirmText, confirmCallback) {\n      console.error(title, content)\n      wx.showModal({\n        title,\n        content: content.toString(),\n        showCancel: confirmText ? true : false,\n        confirmText,\n        success: res => {\n          res.confirm && confirmCallback()\n        },\n      })\n    },\n  },\n\n  ready() {\n    global.chatroom = this\n    this.initRoom()\n    this.fatalRebuildCount = 0\n  },\n})\n","Page({\n  data: {\n    id: \"\",\n    access_token: '',\n    errcode: ''\n  },\n  input1: function (e) {\n    var value = e.detail.value\n    this.setData({\n      id: value\n    })\n\n  },\n  name: function () {\n    wx.setStorage({\n      key:\"id\",\n      data:this.data.id\n    })\n    var that = this\n    wx.request({\n      url: 'https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=wxd2625f4a8a3ea3b9&secret=ae959a82c5a59f039bca3557a6e08a77',\n      method: 'GET',\n      data: {\n        access_token: ''\n      },\n      success: function (res) {\n        wx.setStorage({\n          key:\"token\",\n          data:res.data.access_token\n        })\n\n        console.log(res.data.access_token)\n        wx.request({\n          url: \"https://api.weixin.qq.com/wxa/msg_sec_check?access_token=\" + res.data.access_token,\n          method: 'POST',\n          data: {\n            content: that.data.id\n          },\n          success: function (res) {\n            var id = that.data.id\n            console.log(res)\n            if (res.data.errcode == 0) {\n              wx.navigateTo({\n                url: '../index/index?id=' + id,\n                success: function (res) {},\n                fail: function (res) {},\n                complete: function (res) {},\n              })\n            } else {\n              wx.navigateTo({\n                url: '../index/index?id=' + id,\n                success: function (res) {},\n                fail: function (res) {},\n                complete: function (res) {},\n              })\n            }\n          },\n        })\n\n      }\n    }), console.log(that.data.access_token)\n  }\n})","//index.js\nconst app = getApp()\n\nPage({\n  data: {\n    denglu:true,\n    sign: true,\n    id: \"\",\n    date1: '0',\n    health: 80,\n    feeling: 70,\n    growth: 0,\n    now: \"开心~~~\",\n    bind: 0,\n    pict: \"../../images/yuan.jpg\",\n  },\n  one: function () {\n    var that = this;\n   \n      that.setData({\n        health: that.data.health + 1,\n        pict: \"../../images/bao.jpg\",\n      })\n      setTimeout(function () {\n        that.setData({\n          pict: \"../../images/yuan.jpg\"\n        })\n      }, 2000)\n    \n  },\n\n  two: function () {\n    var that = this;\n      that.setData({\n        health: that.data.health - 1,\n        growth: that.data.growth + 1,\n        pict: \"../../images/shui.gif\",\n      })\n      setTimeout(function () {\n        that.setData({\n          pict: \"../../images/yuan.jpg\"\n        })\n      }, 2000)\n    \n\n  },\n  three: function () {\n    var that = this;\n      that.setData({\n        feeling: that.data.feeling - 1,\n        pict: \"../../images/guai.jpg\",\n        growth: that.data.growth + 1,\n      })\n      setTimeout(function () {\n        that.setData({\n          pict: \"../../images/yuan.jpg\"\n        })\n      }, 2000)\n  },\n  four: function () {\n    var that = this;\n      that.setData({\n        feeling: that.data.feeling + 1,\n        pict: \"../../images/happy.jpg\",\n      })\n      setTimeout(function () {\n        that.setData({\n          pict: \"../../images/yuan.jpg\"\n        })\n      }, 2000)\n    \n\n  },\n  five: function () {\n    var that = this;\n    if (this.data.now == \"生病\") {\n      that.setData({\n        health: that.data.health + 1,\n        pict: \"../../images/yao.jpg\",\n      })\n      setTimeout(function () {\n        that.setData({\n          pict: \"../../images/yuan.jpg\"\n        })\n      }, 2000)\n    }\n\n  },\n  into: function () {\n    this.data.bind++;\n    if (this.data.bind % 2 == 1)\n      this.setData({\n        intomodal: true\n      })\n    else\n      this.setData({\n        intomodal: false\n      })\n  },\n  changeYL: function () {\n    this.setData({\n      showModal: true\n    })\n  },\n  hideModal: function () {\n    this.setData({\n      showModal: false\n    });\n  },\n\n  \n\n  onGetUserInfo: function (e) {\n    if (!this.data.logged && e.detail.userInfo) {\n      this.setData({\n        logged: true,\n        avatarUrl: e.detail.userInfo.avatarUrl,\n        userInfo: e.detail.userInfo\n      })\n    }\n  },\n\n  onGetOpenid: function () {\n    // 调用云函数\n    wx.cloud.callFunction({\n      name: 'login',\n      data: {},\n      success: res => {\n        console.log('[云函数] [login] user openid: ', res.result.openid)\n        app.globalData.openid = res.result.openid\n        wx.navigateTo({\n          url: '../userConsole/userConsole',\n        })\n      },\n      fail: err => {\n        console.error('[云函数] [login] 调用失败', err)\n        wx.navigateTo({\n          url: '../deployFunctions/deployFunctions',\n        })\n      }\n    })\n  },\n\n  // 上传图片\n  doUpload: function () {\n    // 选择图片\n    wx.chooseImage({\n      count: 1,\n      sizeType: ['compressed'],\n      sourceType: ['album', 'camera'],\n      success: function (res) {\n\n        wx.showLoading({\n          title: '上传中',\n        })\n\n        const filePath = res.tempFilePaths[0]\n\n        // 上传图片\n        const cloudPath = 'my-image' + filePath.match(/\\.[^.]+?$/)[0]\n        wx.cloud.uploadFile({\n          cloudPath,\n          filePath,\n          success: res => {\n            console.log('[上传文件] 成功：', res)\n\n            app.globalData.fileID = res.fileID\n            app.globalData.cloudPath = cloudPath\n            app.globalData.imagePath = filePath\n\n            wx.navigateTo({\n              url: '../storageConsole/storageConsole'\n            })\n          },\n          fail: e => {\n            console.error('[上传文件] 失败：', e)\n            wx.showToast({\n              icon: 'none',\n              title: '上传失败',\n            })\n          },\n          complete: () => {\n            wx.hideLoading()\n          }\n        })\n\n      },\n      fail: e => {\n        console.error(e)\n      }\n    })\n  },\n  company: function () {\n    this.setData({\n      date1: parseInt(this.data.date1)  + 1,\n      sign: false\n    });\n    const db = wx.cloud.database()\n    let cur_time = this.getDate();\n    this.add_item_by_database(db,'company',{value: this.data.date1,date: cur_time})\n  },\n  onLoad: function (e) {\n    var id = e.id\n        this.setData({\n          id: id\n        })\n    var id=wx.getStorageSync('id')\n    this.setData({\n      id:id\n    })\n    \n    if (this.data.health < 20) {\n      this.setData({\n        now: \"生病\"\n      })\n    };\n    if (this.data.health >= 20) {\n      this.setData({\n        now: \"开心~~~\"\n      })\n    };\n    var that = this;\n    const db=wx.cloud.database();\n    db.collection(\"company\").get({\n      success: function (res) {\n        res=res.data.slice(-1)\n        that.setData({\n          date1: res[0].value\n        })\n      }\n    })\n    db.collection(\"health\").get({\n      success: function (res) {\n        let len=res.data.length;\n        let t=(len<1)?100:res.data[len-1].value;\n        that.setData({\n          health: t\n        })\n      }\n    })\n    db.collection(\"feeling\").get({\n      success: function (res) {\n        let len=res.data.length;\n        let t=(len<1)?100:res.data[len-1].value;\n        that.setData({\n          feeling: t\n        })\n      }\n    })\n    db.collection(\"growth\").get({\n      success: function (res) {\n        let len=res.data.length;\n        let t=(len<1)?0:res.data[len-1].value;\n        that.setData({\n          growth: t\n        })\n      }\n    })\n\n    var that = this;\n    let cur_time = this.getDate();\n    db.collection('company').where({\n      date: cur_time\n    }).get().then(res => {\n      if (res.data.length > 0) {\n        this.setData({\n          sign: false\n        })\n      }\n    })\n  },\n  getDate: function () {\n    var myDate = new Date();\n    return myDate.getFullYear() + '-' + myDate.getMonth() + '-' + myDate.getDay();\n  },\n  save: function () {\n    let that=this;\n    if (that.data.health < 20) {\n      that.setData({\n        now: \"生病\"\n      })\n    };\n    if (that.data.health >= 20) {\n      that.setData({\n        now: \"开心~~~\"\n      })\n    };\n    const db = wx.cloud.database()\n    this.add_item_by_database(db, 'health', {value:that.data.health})\n    this.add_item_by_database(db, 'growth', {value:that.data.growth})\n    this.add_item_by_database(db, 'feeling',{value:that.data.feeling})\n  },\n  add_item_by_database: function (db, db_name, obj) {\n    db.collection(db_name).get().then(res => {\n      let x = res.data.length;\n      if(x>7) {\n        let del_id = res.data[0]._id;\n        console.log(del_id)\n        db.collection(db_name).doc(del_id).remove({\n          success: function(res) {\n            console.log(res.data);\n          }\n        })\n      }\n\n\n        db.collection(db_name).add({\n        data: obj,\n        success:function(){\n          console.log('add');\n        }\n      })\n      \n      \n\n    })\n  }\n})","Page({\n  data: {\n    value: '',\n    visiable: true,\n    score: '',\n    result: '',\n    dict: {},\n    visiable2: false\n  },\n  input1: function (e) {\n    this.setData({\n      value: e.detail.value\n    })\n  },\n\n  tap1: function () {\n    const db = wx.cloud.database()\n    this.add_item_by_database(db,'mood',this.data.value);\n  },\n  onLoad: function () {\n    var that = this;\n    let cur_time = this.getDate();\n    const db = wx.cloud.database();\n    db.collection('mood').where({\n      date: cur_time\n    }).get().then(res => {\n      if (res.data.length > 0) {\n        this.setData({\n          visiable: false\n        })\n      }\n    })\n    db.collection('word').get({\n      success: function (res) {\n        let arr = res.data;\n        let obj = {};\n        for (let x of arr) {\n          obj[x.value] = x.text;\n        }\n        that.setData({\n          dict: obj\n        })\n      }\n    })\n  },\n  getDate: function () {\n    var myDate = new Date();\n    return myDate.getFullYear() + '-' + myDate.getMonth() + '-' + myDate.getDay();\n  },\n  search1: function () {\n    this.setData({\n      visiable2: true\n    })\n    var that = this;\n    const db = wx.cloud.database();\n    db.collection(\"mood\").get({\n      success: function (res) {\n        let arr = res.data.slice(-7);\n        let sum = 0;\n        for (let x of arr) sum += parseInt(x.value);\n        let new_score = sum / arr.length\n        console.log(sum / arr.length)\n        that.setData({\n          score: new_score\n        });\n        if (new_score <= 30) {\n          that.setData({\n            result: that.data.dict[3]\n          })\n        };\n        if (new_score <= 75 && new_score > 30) {\n          that.setData({\n            result: that.data.dict[1]\n          })\n        };\n        if (new_score > 75) {\n          that.setData({\n            result: that.data.dict[2]\n          })\n        };\n      }\n    })\n  },\n  add_item_by_database: function (db, db_name, value) {\n    let cur_time = this.getDate();\n    db.collection(db_name).get().then(res => {\n      let x = res.data.length;\n      if (x > 7) {\n        let del_id = res.data[0]._id;\n        console.log(del_id)\n        db.collection(db_name).doc(del_id).remove({\n          success: function (res) {\n            console.log(res.data);\n\n          }\n        })\n      }\n\n\n      db.collection(db_name).add({\n        data: {\n          value: value,\n          date: cur_time\n        },\n        success: function () {\n          console.log('add');\n        }\n      })\n\n\n\n    })\n  }\n})","// pages/userConsole/userConsole.js\nPage({\n\n  data: {\n    openid: ''\n  },\n\n  onLoad: function (options) {\n    this.setData({\n      openid: getApp().globalData.openid\n    })\n  }\n  \n})","// pages/storageConsole/storageConsole.js\n\nconst app = getApp()\n\nPage({\n\n  data: {\n    fileID: '',\n    cloudPath: '',\n    imagePath: '',\n  },\n\n  onLoad: function (options) {\n\n    const {\n      fileID,\n      cloudPath,\n      imagePath,\n    } = app.globalData\n\n    this.setData({\n      fileID,\n      cloudPath,\n      imagePath,\n    })\n\n    console.group('文件存储文档')\n    console.log('https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/storage.html')\n    console.groupEnd()\n  },\n\n})","// pages/databaseGuide/databaseGuide.js\n\nconst app = getApp()\n\nPage({\n\n  data: {\n    step: 1,\n    counterId: '',\n    openid: '',\n    count: null,\n    queryResult: '',\n  },\n\n  onLoad: function (options) {\n    if (app.globalData.openid) {\n      this.setData({\n        openid: app.globalData.openid\n      })\n    }\n  },\n\n  onAdd: function () {\n    // const db = wx.cloud.database()\n    // db.collection('counters').add({\n    //   data: {\n    //     count: 1\n    //   },\n    //   success: res => {\n    //     // 在返回结果中会包含新创建的记录的 _id\n    //     this.setData({\n    //       counterId: res._id,\n    //       count: 1\n    //     })\n    //     wx.showToast({\n    //       title: '新增记录成功',\n    //     })\n    //     console.log('[数据库] [新增记录] 成功，记录 _id: ', res._id)\n    //   },\n    //   fail: err => {\n    //     wx.showToast({\n    //       icon: 'none',\n    //       title: '新增记录失败'\n    //     })\n    //     console.error('[数据库] [新增记录] 失败：', err)\n    //   }\n    // })\n  },\n\n  onQuery: function() {\n    // const db = wx.cloud.database()\n    // // 查询当前用户所有的 counters\n    // db.collection('counters').where({\n    //   _openid: this.data.openid\n    // }).get({\n    //   success: res => {\n    //     this.setData({\n    //       queryResult: JSON.stringify(res.data, null, 2)\n    //     })\n    //     console.log('[数据库] [查询记录] 成功: ', res)\n    //   },\n    //   fail: err => {\n    //     wx.showToast({\n    //       icon: 'none',\n    //       title: '查询记录失败'\n    //     })\n    //     console.error('[数据库] [查询记录] 失败：', err)\n    //   }\n    // })\n  },\n\n  onCounterInc: function() {\n    // const db = wx.cloud.database()\n    // const newCount = this.data.count + 1\n    // db.collection('counters').doc(this.data.counterId).update({\n    //   data: {\n    //     count: newCount\n    //   },\n    //   success: res => {\n    //     this.setData({\n    //       count: newCount\n    //     })\n    //   },\n    //   fail: err => {\n    //     icon: 'none',\n    //     console.error('[数据库] [更新记录] 失败：', err)\n    //   }\n    // })\n  },\n\n  onCounterDec: function() {\n    // const db = wx.cloud.database()\n    // const newCount = this.data.count - 1\n    // db.collection('counters').doc(this.data.counterId).update({\n    //   data: {\n    //     count: newCount\n    //   },\n    //   success: res => {\n    //     this.setData({\n    //       count: newCount\n    //     })\n    //   },\n    //   fail: err => {\n    //     icon: 'none',\n    //     console.error('[数据库] [更新记录] 失败：', err)\n    //   }\n    // })\n  },\n\n  onRemove: function() {\n    // if (this.data.counterId) {\n    //   const db = wx.cloud.database()\n    //   db.collection('counters').doc(this.data.counterId).remove({\n    //     success: res => {\n    //       wx.showToast({\n    //         title: '删除成功',\n    //       })\n    //       this.setData({\n    //         counterId: '',\n    //         count: null,\n    //       })\n    //     },\n    //     fail: err => {\n    //       wx.showToast({\n    //         icon: 'none',\n    //         title: '删除失败',\n    //       })\n    //       console.error('[数据库] [删除记录] 失败：', err)\n    //     }\n    //   })\n    // } else {\n    //   wx.showToast({\n    //     title: '无记录可删，请见创建一个记录',\n    //   })\n    // }\n  },\n\n  nextStep: function () {\n    // 在第一步，需检查是否有 openid，如无需获取\n    if (this.data.step === 1 && !this.data.openid) {\n      wx.cloud.callFunction({\n        name: 'login',\n        data: {},\n        success: res => {\n          app.globalData.openid = res.result.openid\n          this.setData({\n            step: 2,\n            openid: res.result.openid\n          })\n        },\n        fail: err => {\n          wx.showToast({\n            icon: 'none',\n            title: '获取 openid 失败，请检查是否有部署 login 云函数',\n          })\n          console.log('[云函数] [login] 获取 openid 失败，请检查是否有部署云函数，错误信息：', err)\n        }\n      })\n    } else {\n      const callback = this.data.step !== 6 ? function() {} : function() {\n        console.group('数据库文档')\n        console.log('https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/database.html')\n        console.groupEnd()\n      }\n\n      this.setData({\n        step: this.data.step + 1\n      }, callback)\n    }\n  },\n\n  prevStep: function () {\n    this.setData({\n      step: this.data.step - 1\n    })\n  },\n\n  goHome: function() {\n    const pages = getCurrentPages()\n    if (pages.length === 2) {\n      wx.navigateBack()\n    } else if (pages.length === 1) {\n      wx.redirectTo({\n        url: '../index/index',\n      })\n    } else {\n      wx.reLaunch({\n        url: '../index/index',\n      })\n    }\n  }\n\n})","// pages/addFunction/addFunction.js\n\nconst code = `// 云函数入口函数\nexports.main = async (event, context) => {\n  console.log(event)\n  console.log(context)\n  return {\n    sum: event.a + event.b\n  }\n}`\n\nPage({\n\n  data: {\n    result: '',\n    canIUseClipboard: wx.canIUse('setClipboardData'),\n  },\n\n  onLoad: function (options) {\n\n  },\n\n  copyCode: function() {\n    wx.setClipboardData({\n      data: code,\n      success: function () {\n        wx.showToast({\n          title: '复制成功',\n        })\n      }\n    })\n  },\n\n  testFunction() {\n    wx.cloud.callFunction({\n      name: 'sum',\n      data: {\n        a: 1,\n        b: 2\n      },\n      success: res => {\n        wx.showToast({\n          title: '调用成功',\n        })\n        this.setData({\n          result: JSON.stringify(res.result)\n        })\n      },\n      fail: err => {\n        wx.showToast({\n          icon: 'none',\n          title: '调用失败',\n        })\n        console.error('[云函数] [sum] 调用失败：', err)\n      }\n    })\n  },\n\n})\n\n","// pages/deployFunctions/deployFunctions.js\nPage({\n\n  /**\n   * 页面的初始数据\n   */\n  data: {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n})","// pages/chooseLib/chooseLib.js\nPage({\n\n  /**\n   * 页面的初始数据\n   */\n  data: {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n})","Page({\n\n  data: {\n    templateMessageResult: '',\n    wxacodeSrc: '',\n    wxacodeResult: '',\n    showClearWXACodeCache: false,\n  },\n\n  submitTemplateMessageForm(e) {\n    this.setData({\n      templateMessageResult: '',\n    })\n\n    wx.cloud.callFunction({\n      name: 'openapi',\n      data: {\n        action: 'sendTemplateMessage',\n        formId: e.detail.formId,\n      },\n      success: res => {\n        console.warn('[云函数] [openapi] templateMessage.send 调用成功：', res)\n        wx.showModal({\n          title: '发送成功',\n          content: '请返回微信主界面查看',\n          showCancel: false,\n        })\n        wx.showToast({\n          title: '发送成功，请返回微信主界面查看',\n        })\n        this.setData({\n          templateMessageResult: JSON.stringify(res.result)\n        })\n      },\n      fail: err => {\n        wx.showToast({\n          icon: 'none',\n          title: '调用失败',\n        })\n        console.error('[云函数] [openapi] templateMessage.send 调用失败：', err)\n      }\n    })\n  },\n\n  onGetWXACode() {\n\n    this.setData({\n      wxacodeSrc: '',\n      wxacodeResult: '',\n      showClearWXACodeCache: false,\n    })\n\n    // 此处为演示，将使用 localStorage 缓存，正常开发中文件 ID 应存在数据库中\n    const fileID = wx.getStorageSync('wxacodeCloudID')\n\n    if (fileID) {\n      // 有云文件 ID 缓存，直接使用该 ID\n      // 如需清除缓存，选择菜单栏中的 “工具 -> 清除缓存 -> 清除数据缓存”，或在 Storage 面板中删掉相应的 key\n      this.setData({\n        wxacodeSrc: fileID,\n        wxacodeResult: `从本地缓存中取得了小程序码的云文件 ID`,\n        showClearWXACodeCache: true,\n      })\n      console.log(`从本地缓存中取得了小程序码的云文件 ID：${fileID}`)\n    } else {\n      wx.cloud.callFunction({\n        name: 'openapi',\n        data: {\n          action: 'getWXACode',\n        },\n        success: res => {\n          console.warn('[云函数] [openapi] wxacode.get 调用成功：', res)\n          wx.showToast({\n            title: '调用成功',\n          })\n          this.setData({\n            wxacodeSrc: res.result,\n            wxacodeResult: `云函数获取二维码成功`,\n            showClearWXACodeCache: true,\n          })\n          wx.setStorageSync('wxacodeCloudID', res.result)\n        },\n        fail: err => {\n          wx.showToast({\n            icon: 'none',\n            title: '调用失败',\n          })\n          console.error('[云函数] [openapi] wxacode.get 调用失败：', err)\n        }\n      })\n    }\n  },\n\n  clearWXACodeCache() {\n    wx.removeStorageSync('wxacodeCloudID')\n\n    this.setData({\n      wxacodeSrc: '',\n      wxacodeResult: '',\n      showClearWXACodeCache: false,\n    })\n\n    wx.showToast({\n      title: '清除成功',\n    })\n  },\n\n})\n\n","Page({\n\n  data: {\n    templateId: '',\n    subscribeMessageResult: '',\n    requestSubscribeMessageResult: '',\n    wxacodeSrc: '',\n    wxacodeResult: '',\n    showClearWXACodeCache: false,\n  },\n\n  async getSubscribeMessageTemplate() {\n    try {\n      const { result } = await wx.cloud.callFunction({\n        name: 'openapi',\n        data: {\n          action: 'requestSubscribeMessage',\n        },\n      })\n\n      const templateId = result\n\n      console.warn('[云函数] [openapi] 获取订阅消息模板 调用成功：', templateId)\n      this.setData({\n        templateId,\n      })\n    } catch (err) {\n      wx.showToast({\n        icon: 'none',\n        title: '调用失败',\n      })\n      console.error('[云函数] [openapi] 获取订阅消息模板 调用失败：', err)\n    }\n  },\n\n  async requestSubscribeMessage() {\n    const templateId = this.data.templateId\n\n    if (!templateId) {\n      wx.showModal({\n        title: '发送失败',\n        content: '请先获取模板 ID',\n        showCancel: false,\n      })\n    }\n\n    wx.requestSubscribeMessage({\n      tmplIds: [templateId],\n      success: (res) => {\n        if (res[templateId] === 'accept') {\n          this.setData({\n            requestSubscribeMessageResult: '成功',\n          })\n        } else {\n          this.setData({\n            requestSubscribeMessageResult: `失败（${res[templateId]}）`,\n          })\n        }\n      },\n      fail: (err) => {\n        this.setData({\n          requestSubscribeMessageResult: `失败（${JSON.stringify(err)}）`,\n        })\n      },\n    })\n  },\n\n  sendSubscribeMessage(e) {\n    this.setData({\n      subscribeMessageResult: '',\n    })\n\n    wx.cloud.callFunction({\n      name: 'openapi',\n      data: {\n        action: 'sendSubscribeMessage',\n        templateId: this.data.templateId,\n      },\n      success: res => {\n        console.warn('[云函数] [openapi] subscribeMessage.send 调用成功：', res)\n        wx.showModal({\n          title: '发送成功',\n          content: '请返回微信主界面查看',\n          showCancel: false,\n        })\n        wx.showToast({\n          title: '发送成功，请返回微信主界面查看',\n        })\n        this.setData({\n          subscribeMessageResult: JSON.stringify(res.result)\n        })\n      },\n      fail: err => {\n        wx.showToast({\n          icon: 'none',\n          title: '调用失败',\n        })\n        console.error('[云函数] [openapi] subscribeMessage.send 调用失败：', err)\n      }\n    })\n  },\n\n  submitSubscribeMessageForm(e) {\n    this.setData({\n      subscribeMessageResult: '',\n    })\n\n    wx.cloud.callFunction({\n      name: 'openapi',\n      data: {\n        action: 'sendSubscribeMessage',\n        formId: e.detail.formId,\n      },\n      success: res => {\n        console.warn('[云函数] [openapi] subscribeMessage.send 调用成功：', res)\n        wx.showModal({\n          title: '发送成功',\n          content: '请返回微信主界面查看',\n          showCancel: false,\n        })\n        wx.showToast({\n          title: '发送成功，请返回微信主界面查看',\n        })\n        this.setData({\n          templateMessageResult: JSON.stringify(res.result)\n        })\n      },\n      fail: err => {\n        wx.showToast({\n          icon: 'none',\n          title: '调用失败',\n        })\n        console.error('[云函数] [openapi] templateMessage.send 调用失败：', err)\n      }\n    })\n  },\n\n  onGetWXACode() {\n\n    this.setData({\n      wxacodeSrc: '',\n      wxacodeResult: '',\n      showClearWXACodeCache: false,\n    })\n\n    // 此处为演示，将使用 localStorage 缓存，正常开发中文件 ID 应存在数据库中\n    const fileID = wx.getStorageSync('wxacodeCloudID')\n\n    if (fileID) {\n      // 有云文件 ID 缓存，直接使用该 ID\n      // 如需清除缓存，选择菜单栏中的 “工具 -> 清除缓存 -> 清除数据缓存”，或在 Storage 面板中删掉相应的 key\n      this.setData({\n        wxacodeSrc: fileID,\n        wxacodeResult: `从本地缓存中取得了小程序码的云文件 ID`,\n        showClearWXACodeCache: true,\n      })\n      console.log(`从本地缓存中取得了小程序码的云文件 ID：${fileID}`)\n    } else {\n      wx.cloud.callFunction({\n        name: 'openapi',\n        data: {\n          action: 'getWXACode',\n        },\n        success: res => {\n          console.warn('[云函数] [openapi] wxacode.get 调用成功：', res)\n          wx.showToast({\n            title: '调用成功',\n          })\n          this.setData({\n            wxacodeSrc: res.result,\n            wxacodeResult: `云函数获取二维码成功`,\n            showClearWXACodeCache: true,\n          })\n          wx.setStorageSync('wxacodeCloudID', res.result)\n        },\n        fail: err => {\n          wx.showToast({\n            icon: 'none',\n            title: '调用失败',\n          })\n          console.error('[云函数] [openapi] wxacode.get 调用失败：', err)\n        }\n      })\n    }\n  },\n\n  clearWXACodeCache() {\n    wx.removeStorageSync('wxacodeCloudID')\n\n    this.setData({\n      wxacodeSrc: '',\n      wxacodeResult: '',\n      showClearWXACodeCache: false,\n    })\n\n    wx.showToast({\n      title: '清除成功',\n    })\n  },\n\n})\n\n","// miniprogram/pages/openapi/callback/callback.js\nPage({\n\n  data: {\n\n  },\n\n  onLoad: function (options) {\n\n  },\n\n  onCustomerServiceButtonClick(e) {\n    console.log(e)\n  },\n})\n","// miniprogram/pages/openapi/cloudid/cloudid.js\nPage({\n\n  data: {\n    weRunResult: '',\n    userInfoResult: '',\n  },\n\n  onGetWeRunData() {\n    wx.getWeRunData({\n      success: res => {\n        wx.cloud.callFunction({\n          name: 'echo',\n          data: {\n            // info 字段在云函数 event 对象中会被自动替换为相应的敏感数据\n            info: wx.cloud.CloudID(res.cloudID),\n          },\n        }).then(res => {\n          console.log('[onGetWeRunData] 收到 echo 回包：', res)\n\n          this.setData({\n            weRunResult: JSON.stringify(res.result),\n          })\n\n          wx.showToast({\n            title: '敏感数据获取成功',\n          })\n        }).catch(err => {\n          console.log('[onGetWeRunData] 失败：', err)\n        })\n      }\n    })\n\n  },\n\n  onGetUserInfo(e) {\n    console.log(e)\n    wx.cloud.callFunction({\n      name: 'openapi',\n      data: {\n        action: 'getOpenData',\n        openData: {\n          list: [\n            e.detail.cloudID,\n          ]\n        }\n      }\n    }).then(res => {\n      console.log('[onGetUserInfo] 调用成功：', res)\n\n      this.setData({\n        userInfoResult: JSON.stringify(res.result),\n      })\n\n      wx.showToast({\n        title: '敏感数据获取成功',\n      })\n    })\n  }\n})\n","const app = getApp()\n\nPage({\n  data: {\n  },\n\n  onLoad: function (options) {\n    if (app.globalData.openid) {\n      this.setData({\n        openid: app.globalData.openid\n      })\n    }\n\n    console.group('数据库\"实时数据推送\"文档')\n    console.log('https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/database/realtime.html')\n    console.groupEnd()\n  },\n})\n","const app = getApp()\n\nPage({\n  data: {\n    avatarUrl: './user-unlogin.png',\n    userInfo: null,\n    logged: false,\n    takeSession: false,\n    requestResult: '',\n    // chatRoomEnvId: 'release-f8415a',\n    chatRoomCollection: 'chatroom',\n    chatRoomGroupId: 'demo',\n    chatRoomGroupName: '聊天室',\n\n    // functions for used in chatroom components\n    onGetUserInfo: null,\n    getOpenID: null,\n  },\n\n  onLoad: function() {\n    // 获取用户信息\n    wx.getSetting({\n      success: res => {\n        if (res.authSetting['scope.userInfo']) {\n          // 已经授权，可以直接调用 getUserInfo 获取头像昵称，不会弹框\n          wx.getUserInfo({\n            success: res => {\n              this.setData({\n                avatarUrl: res.userInfo.avatarUrl,\n                userInfo: res.userInfo\n              })\n            }\n          })\n        }\n      }\n    })\n\n    this.setData({\n      onGetUserInfo: this.onGetUserInfo,\n      getOpenID: this.getOpenID,\n    })\n\n    wx.getSystemInfo({\n      success: res => {\n        console.log('system info', res)\n        if (res.safeArea) {\n          const { top, bottom } = res.safeArea\n          this.setData({\n            containerStyle: `padding-top: ${(/ios/i.test(res.system) ? 10 : 20) + top}px; padding-bottom: ${20 + res.windowHeight - bottom}px`,\n          })\n        }\n      },\n    })\n  },\n\n  getOpenID: async function() {\n    if (this.openid) {\n      return this.openid\n    }\n\n    const { result } = await wx.cloud.callFunction({\n      name: 'login',\n    })\n\n    return result.openid\n  },\n\n  onGetUserInfo: function(e) {\n    if (!this.logged && e.detail.userInfo) {\n      this.setData({\n        logged: true,\n        avatarUrl: e.detail.userInfo.avatarUrl,\n        userInfo: e.detail.userInfo\n      })\n    }\n  },\n\n  onShareAppMessage() {\n    return {\n      title: '即时通信 Demo',\n      path: '/pages/im/room/room',\n    }\n  },\n})\n","// miniprogram/pages/next/next.js\nPage({\n\n  /**\n   * 页面的初始数据\n   */\n  data: {\nnext:3,\n  },\nknow:function(){\nthis.setData({\n  next:1,\n})\n},\nicw:function(){\n  this.setData({\n    next:0,\n  })\n},\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n})","Page({\ndata:{\nregion:\"\",\nkeyword:\"\",\ntitle:\"\",\naddress:\"\",\ncategory:\"\",\nlocationlat:\"\",\nlocationlng:\"\",\ni:0\n},\ninput1:function(e){\n  this.setData({\nregion:e.detail.value\n  })\n},\ninput2:function(e){\n  this.setData({\n    keyword:e.detail.value\n  })\n},tap:function(){\n  this.setData({\n    i:this.data.i+1\n  })\n  if(this.data.i==10){\n    this.setData({\n      i:1\n    })\n  }\n  console.log(this.data.i)\n  var that=this\n  wx.request({\n    url:\"https://apis.map.qq.com/ws/place/v1/suggestion\",\n    data:{\n      region:that.data.region,\n      keyword:that.data.keyword,\n      key:\"OZBBZ-64XLW-NPKRS-RJT75-CZYQJ-RZFUP\",\n    },\n  success:function(res){\n    console.log(res.data)\n    that.setData({\n      title:res.data.data[that.data.i].title,\n      address:res.data.data[that.data.i].address,\n      category:res.data.data[that.data.i].category,\n      locationlat:res.data.data[that.data.i].location.lat,\n      locationlng:res.data.data[that.data.i].location.lng\n    })\n  }\n  })\n}\n})","Page({\n  data: {\n    value: '',\n    lan: '',\n    toView: 'msg-10',\n    chat_list: [],\n  },\n  onLoad: function () {\n    var that=this;\n    wx.getStorage({\n      key: \"OpenId\",\n      success(res) {\n        //console.log(res.data)\n        const db = wx.cloud.database()\n        db.collection('shudong').where({\n          _openid: res.data // 填入当前用户 openid\n        }).get().then(res => {\n          console.log(res.data);\n          that.setData({\n            chat_list:res.data.map(item=>({\n              label:0,\n              text:item.txt\n            }))\n          })\n        })\n      }\n    })\n  },\n  input1: function (e) {\n    this.setData({\n      value: e.detail.value\n    })\n    var that=this;\n    var token=wx.getStorageSync('token')\n    wx.request({\n      url:\"https://api.weixin.qq.com/wxa/msg_sec_check?access_token=\"+token,\n      method:'POST',\n      data:{\n        content:that.data.value\n      },\n    success:function(res){\n      console.log(res)\n      if(res.data.errcode==87014){\n        that.setData({\n          value:\" \"\n        }) \n     \n         }\n    },\n  })\n  },\n  tap1: function () {\n    var that = this;\n    let txt = this.data.value;\n    if (txt === \"\") return;\n    const db = wx.cloud.database()\n    db.collection(\"shudong\").add({\n      data: {\n        txt: txt\n      },\n      success: function (res) {\n        console.log(res)\n      }\n    })\n\n\n    let old_arr = this.data.chat_list\n    old_arr.push({\n      label: 0,\n      text: txt\n    });\n    that.setData({\n      chat_list: old_arr,\n      toView: 'msg-' + (old_arr.length - 1),\n      'value': \"\"\n    })\n\n    console.log(txt);\n  }\n})","Page({\n  data: {\n    value:'',\n    lan:'',\n    toView:'msg-10',\n    chat_list:[\n    ],\n    id:''\n  },\n  onLoad:function(){\n    var id=wx.getStorageSync('id')\n    console.log(id)\n    this.setData({\n      id:id\n    })\n    wx.getUserInfo({\n      success: function(res) {\n        var raw = res.rawData;\n  console.log(raw)\n     \n      },fail:function(res){\n        console.log(res)\n      }\n    })\n  },\n  input1:function(e){\n    this.setData({\n      value:e.detail.value\n    }),console.log(e.detail.value)\n    var that=this;\n    let txt=this.data.value;\n    var token=wx.getStorageSync('token')\n    wx.request({\n      url:\"https://api.weixin.qq.com/wxa/msg_sec_check?access_token=\"+token,\n      method:'POST',\n      data:{\n        content:that.data.value\n      },\n    success:function(res){\n      console.log(res)\n      if(res.data.errcode==87014){\n        that.setData({\n          value:''\n        })\n         }\n    },\n  })\n  },\n tap1:function(){\n  var that=this;\n   let txt=this.data.value;\n   if(txt===\"\") return;\n   let old_arr=this.data.chat_list\n   old_arr.push({label:0,text:txt});\n   that.setData({\n     chat_list:old_arr,\n    toView:'msg-' + (old_arr.length - 1),\n    'value':\"\"\n   })\n    console.log(txt);\n    wx.request({\n      url: 'https://openapi.tuling123.com/openapi/api/v2',\n      method:'POST',\n      data:{\n        \"perception\":{\n          \"inputText\":{\n            'text':txt\n          }\n        },\n        \"userInfo\":{\n          \"apiKey\":\"024c04c8359649c8a230620a3e536f32\",\n          \"userId\": \"demo\"\n        }\n      },\n      success({data}){\n        let re=data.results[0].values.text;\n        console.log(data.results[0].values.text);\n        let old_arr=that.data.chat_list;\n        old_arr.push({label:1,text:re})\n        that.setData({\n        lan:data.results[0].values.text,\n        chat_list:old_arr,\n        toView:'msg-' + (old_arr.length - 1),\n        })\n      }\n    })\n  }\n})\n","Page({\n  data: {\n    canIUse: wx.canIUse('button.open-type.getUserInfo')\n  },\n  onLoad: function () {\n    var that = this\n    wx.getSetting({\n      success(res) {\n        if (res.authSetting['scope.userInfo']) {\n          // 已经授权，可以直接调用 getUserInfo 获取头像昵称\n          wx.getUserInfo({\n            success: function (res) {\n              console.log(res.userInfo);\n              that.setData({\n                canIUse: 0\n              })\n            }\n          })\n          wx.cloud.callFunction({\n            name: 'getid',\n            complete: res => {\n              var openid = res.result.openid\n              console.log('openid--', openid)\n              wx.setStorage({\n                key: \"OpenId\",\n                data: openid\n              })\n            }\n          })\n        }\n      }\n    })\n  },\n  bindGetUserInfo(e) {\n    console.log(e)\n  }\n})"]}